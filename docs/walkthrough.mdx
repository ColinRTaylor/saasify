import { Head } from 'mdx-go'

<Head>
  <title>Fin Walkthrough</title>
</Head>

## [Fin](/) Walkthrough

This walkthrough will give you an overview of the Fin platform by creating an example project and deploying it to Fin.

The result will be a public, monetized API that anyone can call or subscribe to.

#### Getting Started

First you'll need to install the [Fin CLI](https://github.com/functional-income/fin-cli).

```bash
npm install -g fin
```

You can check out the available commands via `fin --help` and run `fin help <cmd>` to view the sub-help for any given command.

Before we proceed, you'll need to create a Fin account to get started.

```bash
fin signup --email <travis@example.com> --password password
```

#### Creating a Project

Now that you're authenticated, you can create your first `Project`. Create a new directory containing these two files:

*(fin.json)*
```json
{
  "version": 1,
  "name": "example-project",
  "services": [
    {
      "src": "hello-world.ts",
      "name": "helloWorld"
    }
  ]
}
```

*(hello-world.ts)*
```ts
export default (name = 'World') => {
  return `Hello ${name}!`
}
```

#### Deploying your Project

You can deploy your project by running `fin deploy` from within the directory containing your project's `fin.json`.

```bash
fin deploy
```

This will take a minute or so to complete, with the end result being a publicly accessible deployment. The deployment URL will be copied to your clipboard and should resemble `https://api.functional-income.com/1/call/hello-world_f4a0d67bc61f7b5b`.

#### Using your Deployment

You can now call your services on this live deployment via HTTP. As an example, we'll be using [httpie](https://httpie.org/), an excellent command-line HTTP client.

Via HTTP GET:

```bash
> http https://api.functional-income.com/1/call/hello-world_f4a0d67bc61f7b5b
Hello World!
```

Via HTTP GET with params:

```bash
> http https://api.functional-income.com/1/call/hello-world_f4a0d67bc61f7b5b?name=Foo
Hello Foo!
```

Via HTTP POST with params:

```bash
> http POST https://api.functional-income.com/1/call/hello-world_f4a0d67bc61f7b5b name=Nala
Hello Nala!
```

Note that because Fin uses [Functional TypeScript](https://github.com/transitive-bullshit/functional-typescript) to define your service endpoints, all parameters and return values are type checked for consistency.

Also note that all of these calls are going through a Fin proxy that rate limits your unauthenticated HTTP requests based on your IP address.

If you want to take advantage of Fin's monetization features and usage-based pricing, you'll need to **subscribe** to this project.

#### Subscribing to a Project

The first step in creating a SaaS subscription to a project is to add a valid form of payment to your account.

```bash
fin billing add
```

This will prompt your for credit card details that will be stored in [Stripe](https://stripe.com).

Note that Fin never transmits or stores your payment info and all payment-related data is securely handled by Stripe.

Now that you have a credit card connected to your account with Stripe, you can subscribe to any projects you want to access.

```bash
fin subscribe <project-name>
```

This will create a new Stripe subscription for the given project and return a `Consumer` object with an access `token`.

From now on, when you call your project's servicers via HTTP, you'll want to include this access `token` as part of the request.

You can do this by either adding an `authorization` header with a value of your `token`:

```bash
> http https://api.functional-income.com/1/call/hello-world_f4a0d67bc61f7b5b authorization:<token>
Hello World!
```

Or by adding a `token` query parameter:

```bash
> http https://api.functional-income.com/1/call/hello-world_f4a0d67bc61f7b5b?token=<token>&name=Bob
Hello Bob!
```

#### Next Steps

At this point, you've created your own monetizable SaaS API and subscribed to it. Fin takes care of all the book-keeping in terms of tracking Stripe usage and payouts via [Stripe Connect](https://stripe.com/connect).

The next step would be **publishing** your SaaS project in the form of a fully functional template-based SaaS website, but this functionality is still a WIP.

Thanks for following along!

---

[home](/)
