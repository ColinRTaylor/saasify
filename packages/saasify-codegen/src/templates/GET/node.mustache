const request = require('request')

const options = {
  url: '{{{service.url}}}',{{#token}}
  headers: {
    'authorization': '{{token}}'
  },{{/token}}
  qs: {{{exampleNodeJSON}}},
  json: true{{#hasFileOutput}},
  encoding: null{{/hasFileOutput}}
}

request(options, (error, response, body) => {
  if (error) throw new Error(error)

  {{#hasFileOutput}}
  fs.writeFileSync('{{output}}', body){{/hasFileOutput}}{{^hasFileOutput}}
  console.log(body){{/hasFileOutput}}
})
